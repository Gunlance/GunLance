## ARP

只对TCP/IP协议簇有意义的IP地址。数据链路如以太网或令牌环网都有自己的寻址机制（常常为48bit地址)

当一台主机把以太网数据帧发送到位于同一局域网上的另一台主机时，是根据 48 bit的以太网地址来确定目的接口的。

ARP为 **IP地址到对应的硬件地址** 之间提供动态映射。我们之所以用动态这个词是因为这个过程是自动完成的，一般应用程序用户或系统管理员不必关心。

RARP是被那些没有磁盘驱动器的系统使用（一般是无盘工作站或 X终端），它需要系统管理员进行手工设置。

### 例子

输入命令

```bash
ftp bsdi
```
连接到名为bsdi的ftp服务器上，这时候的链接步骤如下

1. 应用程序FTP客户端调用函数`gethostbyname`把主机名（bsdi）转换成32bit的IP地址。 这个函数在DNS中称作解析器，这个转换过程或者使用DNS，或者在较小网络中使用一个静态的主机文件。 
2. FTP客户端请求TCP用得到的IP地址建立连接
3. TCP发送一个连接请求分段到远端的主机，即用上述IP地址发送一份IP数据报
4. 如果目的主机在本地网络上（如以太网、令牌环网或点对点链接的另一端），那么IP数据报可以直接送到目的主机上。如果目的主机在一个远程网络上，那么就通过IP选路函数来确定位于本地网络上的下一站路由器地址，并让它转发IP数据报。在这两种情 况下，IP数据报都是被送到位于本地网络上的一台主机或路由器 
5. 假定是一个以太网，那么发送端主机必须把32bit的IP地址变换成48bit的以太网地址。从逻辑Internet地址到对应的物理硬件地址需要进行翻译。这就是ARP的功能。ARP本来是用于广播网络的，有许多主机或路由器连在同一个网络上
6. ARP发送一份称作ARP请求的以太网数据帧给以太网上的每个主机。这个过程称作广播。ARP请求数据帧中包含目的主机的IP地址（主机名为bsdi），其意思是“如果你是这个IP地址的拥有者，请回答你的硬件地址”
7. 目的主机的ARP层收到这份广播报文后，识别出这是发送端在寻问它的IP地址，于是发送一个ARP应答。这个ARP应答包含IP地址及对应的硬件地址。
8. 收到ARP应答后，使ARP进行请求—应答交换的IP数据报现在就可以传送了。 
9. 发送IP数据报到目的主机。

### Free Arp

它是指主机发送ARP查找自己的IP地址。通常，它发生在系统引导期间进行接口配置的时候


## RARP