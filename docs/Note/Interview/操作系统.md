## 概述

### 同步 异步 

同步和异步关注的是 **消息通信机制**

所谓同步，就是在发出一个 *调用* 时，在没有得到结果之前，该 *调用* 就不返回。

但是一旦调用返回，就得到返回值了。
换句话说，就是由 *调用者* 主动等待这个 *调用* 的结果。


而异步则是相反， ***调用* 在发出之后，这个调用就直接返回了** ，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在 *调用* 发出后， *被调用者* 通过状态、通知来通知调用者，或通过回调函数处理这个调用。

### 阻塞 非阻塞

阻塞和非阻塞关注的是 **程序在等待调用结果（消息，返回值）时的状态**

阻塞调用是指调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。

非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程。

## 进程

### 进程简述

三种状态

* 就绪
* 执行
* 阻塞
  
### 进程同步与通信

进程间通信主要包括管道、系统IPC（包括消息队列、信号量、信号、共享内存等）、以及套接字socket。

### 进程与线程

1. 进程是对运行时程序的封装，是系统进行资源调度和分配的的基本单位，实现了操作系统的并发
2. 线程是进程的子任务，是CPU调度和分派的基本单位，用于保证程序的实时性，实现进程内部的并发

#### 区别

1. 一个线程只能属于一个进程，而一个进程可以有多个线程，但至少有一个线程。 **线程依赖于进程而存在** 。
2. 进程在执行过程中拥有独立的内存单元，而多个线程共享进程的内存。（资源分配给进程，同一进程的所有线程共享该进程的所有资源。同一进程中的多个线程共享代码段（代码和常量），数据段（全局变量和静态变量），扩展段（堆存储）。但是每个线程拥有自己的栈段，栈段又叫运行时段，用来存放所有局部变量和临时变量。）
3. 进程是资源分配的最小单位，线程是CPU调度的最小单位

线程共有的环境

* 进程代码段
* 进程的共有数据（利用这些共享的数据，线程很容易的实现相互之间的通讯）
* 进程打开的文件描述符
* 信号的处理器
* 进程的当前目录和进程用户ID与进程组ID。

线程独享的

* 线程ID
* 寄存器组的值
* 线程的堆栈
* 错误返回码
* 线程的信号屏蔽码
* 线程的优先级

#### 需要线程的原因

进程可以使多个程序能并发执行，以提高资源的利用率和系统的吞吐量；但是其具有一些缺点：

进程在同一时间只能干一件事

进程在执行的过程中如果阻塞，整个进程就会挂起，即使进程中有些工作不依赖于等待的资源，仍然不会执行。

#### 协程

协程，又称微线程，纤程，英文名Coroutine。协程看上去也是子程序，但执行过程中，在子程序内部可中断，然后转而执行别的子程序，在适当的时候再返回来接着执行。

**与线程区别**

那和多线程比，协程最大的优势就是协程极高的执行效率。因为子程序切换不是线程切换， **而是由程序自身控制** ，因此，没有线程切换的开销，和多线程比，线程数量越多，协程的性能优势就越明显。

第二大优势就是 **不需要多线程的锁机制**

### 进程调度

#### 锁

在多线程编程中，操作系统引入了锁机制。通过锁机制，能够保证在多核多线程环境中，在某一个时间点上，只能有一个线程进入临界区代码，从而保证临界区中操作数据的一致性。

所谓的锁，可以理解为内存中的一个整型数，拥有两种状态：空闲状态和上锁状态。加锁时，判断锁是否空闲，如果空闲，修改为上锁状态，返回成功；如果已经上锁，则返回失败。解锁时，则把锁状态修改为空闲状态。 
加锁过程用如下伪码表示

1. read lock； 
2. 判断lock状态； 
3. 如果已经加锁，失败返回； 
4. 把锁状态设置为上锁； 
5. 返回成功。 

虽然每一步是原子性的，但是每一步之间却是可以中断的。比如进程A在执行完2后发生中断，中断中进程B也执行了加锁过程，返回中断后就会发生两个进程都会加锁。 
对于这个问题，计算机已经解决，方法是采用原子级汇编指令test and set 和swap。

#### 批处理系统

先来先服务

短作业优先

#### 交互式系统

时间片轮转

优先级调度

多级反馈队列

#### 实时系统

### 进程同步

### 孤儿进程 & 僵尸进程

* https://www.cnblogs.com/Anker/p/3271773.html

## 存储管理

### 分页存储

#### 快表

页表一般都很大，并且存放在内存中。

所以处理器引入MMU（内存管理单元）后，读取指令、数据需要访问两次内存：首先通过查询页表得到物理地址，然后访问该物理地址读取指令、数据。

### 虚拟存储器

**缺页中断**

当软件试图访问已映射在虚拟地址空间中，但是目前并未被加载在物理内存中的一个分页时，由中央处理器的内存管理单元所发出的中断。

#### OPT

#### FIFO

#### LRU

基于HashMap和双向链表实现LRU

#### LFU

## 处理机管理

### cache 的数据一致性

java valitid关键字？

## I/O管理

## 文件管理

